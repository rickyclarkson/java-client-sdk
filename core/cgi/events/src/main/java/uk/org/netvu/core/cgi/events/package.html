<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<html>
<body bgcolor="white">

Provides building and parsing for events.cgi queries and their results.

To build a Java object representing an events.cgi query (in this case only showing the events from the last 100 seconds), and to get a URL from it:
<pre><code>
    import uk.org.netvu.core.cgi.events.EventsCGI;
    import java.util.Date;
    import java.net.URL;

    public class Main
    {
        public static void main(String[] args)
        {
            int oneHundredSecondsAgo = (int)(new Date().getTime() / 1000) - 100;
            EventsCGI cgi = new EventsCGI.Builder().time(oneHundredSecondsAgo).range(100).build();
            String url = "http://my-host/"+cgi.toString();
            // code here for actually connecting to that URL and doing work with it.
        }
    }
</code></pre>
Note that the time and range parameters shown above are only examples, there are a number of parameters that events.cgi can filter on.

To parse a URL (or part of a URL) into an EventsCGI object:
<pre><code>
    import uk.org.netvu.core.cgi.events.EventsCGI;

    public class Main
    {
        public static void main(String[] args)
        {
            EventsCGI cgi = EventsCGI.fromCSV("http://my-host/events.cgi?time=5000000&cammask=4");
        }
    }
</code></pre>
The servers send JavaScript by default when a query is sent - this library is only capable of parsing CSV, so it defaults to sending a 'format' parameter of type CSV.

To parse the CSV returned by the server (in this case hard-coded):
<pre><code>
    import uk.org.netvu.core.cgi.events.EventsCGIResult;

    public class Main
    {
        public static void main(String[] args)
        {
            EventsCGIResult result = EventsCGIResult.fromCSV(
                "1, 1, COURTYARD, 1211488075, 3600, ,exists, 1, 10, 2, 0, 4, 8" );

            System.out.println( result.getStatus() );
            System.out.println( result.getAlarm() );

            System.out.println( result.toCSV(1) ); //this is explained in the next paragraph.
        }
    }
</code></pre>
To output CSV from the EventsCGIResult, use EventsCGIResult's toCSV(int) method, as shown in the preceding code sample.  The int parameter represents the index of the result within the set of results, which is not stored in EventsCGIResult.  It is necessary to generate CSV in the same format that the server outputs though.
</body>
</html>
